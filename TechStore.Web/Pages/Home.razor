@page "/"
@inject HttpClient Http
@using TechStore.Web.Components


<PageTitle>TechStore</PageTitle>

<h1>🛒 TechStore - Loja de Tecnologia</h1>

<Banner />
<Categorias />
<ProdutosDestaque />

@if (mensagem != null)
{
    <div class="alert alert-info">
        <h4>Status da API:</h4>
        <p>@mensagem</p>
    </div>
}

<button @onclick="TestarConexao" class="btn btn-primary"> 
    Testar Conexão com API
</button>

@code {
    private string? mensagem;

    private async Task TestarConexao()
    {
        try
        {
            // Tenta acessar a API
            var resposta = await Http.GetAsync("api/produtos");

            if (resposta.IsSuccessStatusCode)
            {
                mensagem = "✅ API conectada com sucesso!";
            }
            else
            {
                mensagem = $"⚠️ API respondeu com erro: {resposta.StatusCode}";
            }
        }
        catch (Exception ex)
        {
            mensagem = $"❌ Erro: {ex.Message}";
        }
    }
}